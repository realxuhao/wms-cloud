<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bosch.product.mapper.ProductReturnMapper">


    <select id="list" resultType="com.bosch.product.api.domain.vo.ProductReturnVO">
        select pr.*,mp.product_name as materialName
        from product_return pr
                 left join `wms-cloud2`.md_product_packaging mp on pr.material_nb = mp.product_no and mp.delete_flag = 0
        where 1 = 1 and mp.delete_flag = 0
        <if test="plantNb != null  and plantNb != ''">and pr.plant_nb like concat('%', #{plantNb}, '%')</if>
        <if test="ssccNumber != null  and ssccNumber != ''">and pr.sscc_number like concat('%', #{ssccNumber}, '%')</if>
        <if test="productNb != null  and productNb != ''">and pr.material_nb like concat('%', #{productNb}, '%')</if>
        <if test="type != null">and pr.type like concat('%', #{type}, '%')</if>
        <if test="wareCode != null  and wareCode != ''">and pr.ware_code like concat('%', #{wareCode}, '%')</if>
        order by pr.create_time desc
    </select>
</mapper>
